var widgetHF={iFrame:undefined,iFrameContainer:undefined,iFrameName:"iframe-hf",isTest:true,isCommunicationEstablished:false,inited:false,targetOrigin:"*",token:undefined,receiveMessage:function(event){if(event.origin==="https://www.heroesandfriends.com/"||widgetHF.isTest||widgetHF.isLocal||widgetHF.tools.isLocalUrl(event.origin)){var data=JSON.parse(event.data);widgetHF.targetOrigin=event.origin;if(data.type){switch(data.type){case"init":if(!widgetHF.token){widgetHF.isCommunicationEstablished=true;widgetHF.token=data.token;widgetHF.confirmConnection()}break;case"resize":if(data.token){if(widgetHF.token==data.token){if(data.h)widgetHF.setHeight(data.h);widgetHF.iFrame.contentWindow.postMessage(JSON.stringify({type:"resized",token:widgetHF.token}),widgetHF.targetOrigin)}}break;default:return}}}else{return}},init:function(event){widgetHF.iFrame=document.getElementById("iframe-hf");widgetHF.iFrameContainer=document.getElementById("iframe-hf-container");widgetHF.setWidth();widgetHF.isLocal=widgetHF.tools.isLocalUrl(window.location.host);window.addEventListener("message",widgetHF.receiveMessage,false);window.addEventListener("resize",widgetHF.setWidth,false);widgetHF.inited=true},setHeight:function(h){widgetHF.iFrameContainer.style.height=h+"px";widgetHF.iFrame.style.height=h+"px";widgetHF.iFrame.setAttribute("height",h+"px")},setWidth:function(){var w=widgetHF.iFrameContainer.offsetWidth+widgetHF.tools.getScrollBarWidth()-1;widgetHF.iFrame.style.width=w+"px";widgetHF.iFrame.setAttribute("width",w+"px")},confirmConnection:function(token){widgetHF.iFrame.contentWindow.postMessage(JSON.stringify({type:"init",token:widgetHF.token}),widgetHF.targetOrigin)},tools:{isLocalUrl:function(url){return url.indexOf("localhost")>-1},getScrollBarWidth:function(){var inner=document.createElement("p");inner.style.width="100%";inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2)w2=outer.clientWidth;document.body.removeChild(outer);return w1-w2}}};if(window.addEventListener){window.addEventListener("load",widgetHF.init)}else{window.attachEvent("onload",widgetHF.init)}
