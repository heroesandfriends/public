var widgetHF={iFrame:void 0,iFrameContainer:void 0,iFrameName:"iframe-hf",isTest:!1,isCommunicationEstablished:!1,inited:!1,targetOrigin:"*",token:void 0,receiveMessage:function(e){if("https://www.heroesandfriends.com/"===e.origin||"https://test.heroesandfriends.com/"===e.origin||"https://translate.heroesandfriends.com/"===e.origin||widgetHF.isTest||widgetHF.isLocal||widgetHF.tools.isLocalUrl(e.origin)){var t=JSON.parse(e.data);if(widgetHF.targetOrigin=e.origin,t.type)switch(t.type){case"init":widgetHF.token||(widgetHF.isCommunicationEstablished=!0,widgetHF.token=t.token,widgetHF.confirmConnection());break;case"resize":t.token&&widgetHF.token==t.token&&(t.h&&widgetHF.setHeight(t.h),widgetHF.iFrame.contentWindow.postMessage(JSON.stringify({type:"resized",token:widgetHF.token}),widgetHF.targetOrigin));break;default:return}}},init:function(e){widgetHF.iFrame=document.getElementById("iframe-hf"),widgetHF.iFrameContainer=document.getElementById("iframe-hf-container"),widgetHF.setWidth(),widgetHF.isLocal=widgetHF.tools.isLocalUrl(window.location.host),window.addEventListener("message",widgetHF.receiveMessage,!1),window.addEventListener("resize",widgetHF.setWidth,!1),widgetHF.inited=!0},setHeight:function(e){widgetHF.iFrameContainer.style.height=e+"px",widgetHF.iFrame.style.height=e+"px",widgetHF.iFrame.setAttribute("height",e+"px")},setWidth:function(){var e=widgetHF.iFrameContainer.offsetWidth+widgetHF.tools.getScrollBarWidth()-1;widgetHF.iFrame.style.width=e+"px",widgetHF.iFrame.setAttribute("width",e+"px")},confirmConnection:function(e){widgetHF.iFrame.contentWindow.postMessage(JSON.stringify({type:"init",token:widgetHF.token}),widgetHF.targetOrigin),console.log("hf-widget is connected")},tools:{isLocalUrl:function(e){return e.indexOf("localhost")>-1},getScrollBarWidth:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return i==n&&(n=t.clientWidth),document.body.removeChild(t),i-n}}};window.addEventListener?window.addEventListener("load",widgetHF.init):window.attachEvent("onload",widgetHF.init);
